{"version":3,"names":[],"mappings":"","sources":["main.js"],"sourcesContent":["/*\r\n\tStudent Album main JS file\r\n\tWritten by hand by: Mawia HL\r\n\r\n */\r\n$(document).ready(function () {\r\n    \t$(\"#submitData\").click(function (event) {\r\n        event.preventDefault();\r\n        var form = $('#addStudent')[0];\r\n        var data = new FormData(form);\r\n        $(\"#submitData\").prop(\"disabled\", true);\r\n        $.ajax({\r\n            type: \"POST\",\r\n            enctype: 'multipart/form-data',\r\n            url: \"students/add\",\r\n            data: data,\r\n            processData: false,\r\n            contentType: false,\r\n            cache: false,\r\n            timeout: 6000,\r\n            success: function (data) {\r\n            \t$('#addStudent').trigger(\"reset\");                \r\n                $(\"#submitData\").prop(\"disabled\", false);\r\n                setTimeout( function(){\r\n                \t$(\"#exampleModal\").modal('hide')\r\n                }, 300 );\r\n                $(\"#result\").html(data);\r\n                $(\".alert\").fadeTo(500, 0).slideUp(500, function() {\r\n\t\t            $(this).hide();\r\n\t\t        });\r\n\t\t        $(\"#results\").empty();\r\n\t\t        $(\"#results\").loaddata();\r\n            },\r\n            error: function (e) {\r\n                $(\"#result\").html(e.responseText);\r\n                $(\"#submitData\").prop(\"disabled\", false);                               \r\n            }\r\n        });\r\n\r\n    });\r\n\r\n});\r\n(function($){\t\r\n\t$.fn.loaddata = function(options) {\r\n\t\tvar settings = $.extend({ \r\n\t\t\tloading_gif_url\t: \"../img/spinner.gif\",\r\n\t\t\tend_record_text\t: '',\r\n\t\t\tdata_url \t\t: 'students/loadMore',\r\n\t\t\tstart_page \t\t: 1\r\n\t\t}, options);\t\t\r\n\t\tvar el = this;\t\r\n\t\tloading  = false; \r\n\t\tend_record = false;\r\n\t\tcontents(el, settings);\t\t\r\n\t\t$(window).scroll(function() { //detact scroll\r\n\t\t\tif($(window).scrollTop() + $(window).height() >= $(document).height()){\r\n\t\t\t\tcontents(el, settings);\r\n\t\t\t}\r\n\t\t});\t\t\r\n\t}; \r\n\tfunction contents(el, settings){\r\n\t\tvar load_img = $('<img/>').attr('src',settings.loading_gif_url).addClass('text-center');\r\n\t\tvar record_end_txt = $('<div/>').text(settings.end_record_text).addClass('end-record-info');\r\n\t\tif(loading == false && end_record == false){\r\n\t\t\tloading = true;\r\n\t\t\tel.append(load_img);\r\n\t\t\t$.post( settings.data_url, {'page': settings.start_page}, function(data){\r\n\t\t\t\tif(data.trim().length == 0){\r\n\t\t\t\t\tel.append(record_end_txt); \r\n\t\t\t\t\tload_img.remove();\r\n\t\t\t\t\tend_record = true;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tloading = false;\r\n\t\t\t\tload_img.remove(); \r\n\t\t\t\tel.append(data);\r\n\t\t\t\tsettings.start_page++;\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n})(jQuery);\r\n$(\"#results\").loaddata();\r\n$( document ).ready(function() {\r\n\t$('.bd-example-modal-xl').on('show.bs.modal', function (event) {\r\n\t    var button = $(event.relatedTarget);\r\n\t    var url = button.data('remote'); \r\n\t    var modal = $(this);\r\n\t    $.ajax({\r\n\t        url: url,\r\n\t        type: 'GET',\r\n\t        cache: false,\r\n\t        dataType:'Json',\r\n\t        }).done(function(result){\r\n\t           modal.find('.modal-title').text(result.name);\r\n\t           modal.find('.modal-body ul li.sex>span').html(result.sex);\r\n\t           modal.find('.modal-body ul li.dob>span').html(result.dob);\r\n\t           modal.find('.modal-body ul li.email>span').html(result.email);\r\n\t     });  \r\n\t});\r\n});\r\n\r\nfunction deleteStudent(id){\r\n\tvar x = confirm('Are you sure you want to delete');\r\n\tif(x){\r\n\t\t$.ajax({\r\n\t\t     url: 'students/'+id+'/delete',\r\n\t\t     type: 'POST',\r\n\t\t     cache: false,\r\n\t\t     dataType:'Json',\r\n\t\t     success: function(response){\r\n\t\t       if(response.id == 1){\r\n\t\t       \t\t$(\"#result\").html(response.text);\r\n\t\t       \t\t$(\"#results\").empty();\r\n\t\t       \t\t$(\"#results\").loaddata();\r\n\t\t      \t} else {\r\n\t\t\t \t\talert('Invalid ID.');\r\n\t\t      }\r\n\t\t    }\r\n\t\t   });\r\n\t} else {\r\n\t\treturn false;\r\n\t}\t\r\n}\r\n\r\n\r\n//# sourceMappingURL=main.js.map\r\n\r\n//# sourceMappingURL=main.js.map\r\n\r\n//# sourceMappingURL=main.js.map\r\n\r\n//# sourceMappingURL=main.js.map\r\n"],"file":"main.js"}